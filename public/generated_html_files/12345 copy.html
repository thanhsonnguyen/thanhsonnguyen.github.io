<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]>      <html class="no-js"> <!--<![endif]-->
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title></title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
    <link rel="stylesheet" href="">
    <style>
        .chart-id-1 .chart-id-2 {
            position: relative;
            height: 40vh;
            width: 50vw;
        }

        canvas {
            width: 100% !important;
            height: 100% !important;
        }

        iframe {
            overflow: hidden;
            border: 0;
            width: 100%;
            height: 400px;
        }

        img {
            overflow: hidden;
            border: 0;
            width: 100%;
            height: 400px;
        }
    </style>
</head>

<body>
    <!--[if lt IE 7]>
            <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="#">upgrade your browser</a> to improve your experience.</p>
        <![endif]-->
    <!-- <h1 class="text-center">Dashboard</h1> -->
    <div class="container-fluid">
        <h1 class="text-center">Dashboard</h1>
        <div class="row clearfix p-2">
            <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12 p-2">
                <!-- <div class="col"> -->
                <div id="chart-id-1" class="card">
                    <!-- <canvas id="chart-id-1-canvas"></canvas> -->
                </div>
            </div>
            <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12 p-2">
                <!-- <div class="col"> -->
                <div id="chart-id-2" class="card">
                    <!-- <canvas id="chart-id-2-canvas"></canvas> -->
                </div>
            </div>
        </div>
        <div class="row clearfix p-2">
            <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12 p-2">
                <div id="chart-id-3" class="card">
                    <!-- <canvas id="chart-id-1-canvas"></canvas> -->
                </div>
            </div>
            <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12 p-2">
                <div id="chart-id-4" class="card">
                    <!-- <canvas id="chart-id-2-canvas"></canvas> -->
                </div>
            </div>
        </div>
        <div class="row clearfix p-2">
            <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12 p-2">
                <div id="chart-id-5" class="card">
                    <!-- <canvas id="chart-id-1-canvas"></canvas> -->
                </div>
            </div>
            <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12 p-2">
                <div id="chart-id-6" class="card">
                    <!-- <canvas id="chart-id-2-canvas"></canvas> -->
                </div>
            </div>
        </div>
    </div>

    <!-- <div id="chart-id-2">
        <canvas id="chart-id-2-canvas" width="600" height="800"></canvas>
    </div>
    <div id="chart-id-3">
        <canvas id="chart-id-3-canvas" width="600" height="800"></canvas>
    </div>
    <div id="chart-id-4">
        <canvas id="chart-id-4-canvas" width="600" height="800"></canvas>
    </div>
    <div id="chart-id-5">
        <canvas id="chart-id-5-canvas" width="600" height="800"></canvas>
    </div>
    <div id="chart-id-6">
        <canvas id="chart-id-6-canvas" width="600" height="800"></canvas>
    </div> -->
    <!-- <iframe src="http://demo.edu.vn/divi/tap-2/#tap-2 #q > div > canvas" height=500 width=90%></iframe> -->
    <!-- <iframe src="http://demo.edu.vn/divi/tap-1/#tap-1 #tap-1 > div.vc_tta-panel-body > div > div:nth-child(1) > div > div > div:nth-child(2)" height=500 width=90%></iframe> -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"
        integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg=="
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" crossorigin="anonymous">
    </script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.4/dist/Chart.min.js"></script>
    <!-- <script src="" async defer></script> -->

    <script>
        //document.querySelector("#tap-1 > div.vc_tta-panel-body > div > div:nth-child(1) > div > div > div:nth-child(5)")

        //$('#chart-id-1').load("http://www.corsproxy.com/http://demo.edu.vn/divi/ #tap-1 > div.vc_tta-panel-body > div > div:nth-child(1) > div > div > div:nth-child(5)")
        /*$.get('../../config/chart_ids.json',function(data){
            console.log(data['chart-id-1'])
            //chart_data = 
        })*/

        fetched_data = []
        // A $( document ).ready() block.
        $(document).ready(function () {
            console.log("ready!");
            fetch_chart_configs()
        });


        function fetch_chart_configs() {
            $.ajax({
                type: 'GET',
                url: '../public/config/chart_ids.json',
                //data: {get_param: 'value'},
                dataType: 'json',
                success: function (data) {
                    //var names = data
                    //$('#cand').html(data);
                    console.log(data)
                    fetched_data = data
                    chart_ids = Object.keys(data)
                    for (i = 0; i < chart_ids.length; i++) {
                        //for (i = 0; i < 4; i++) {
                        if (data[chart_ids[i]]['type'] === 'data') {
                            process_chart_config_data(chart_ids[i], data[chart_ids[i]]['content'])
                        } else if (data[chart_ids[i]]['type'] === 'iframe') {
                            process_iframe_charts(chart_ids[i], data[chart_ids[i]]['content'])
                        } else if (data[chart_ids[i]]['type'] === 'image') {
                            process_image_charts(chart_ids[i], data[chart_ids[i]]['content'])
                        } else {
                            null
                        }

                    }
                }
            })
        }

        function process_image_charts(html_element_id, img_src) {
            img_ele = document.createElement('img')
            img_ele.src = img_src

            document.getElementById(html_element_id).appendChild(img_ele)
        }

        function process_iframe_charts(html_element_id, iframe_src) {
            iframe_ele = document.createElement('iframe')
            iframe_ele.id = html_element_id + '-iframe'
            iframe_ele.src = iframe_src
            iframe_ele.scolling = "no"
            iframe_ele.frameborder = "0"
            //iframe_ele.parent.classList.add('embed-responsive')
            iframe_ele.classList.add('embed-responsive-item')
            document.getElementById(html_element_id).appendChild(iframe_ele)

        }

        function process_chart_config_data(html_element_id, html_element_text) {
            temp = $.parseHTML(html_element_text)[0]
            chart_data = JSON.parse(temp.dataset.vcValues)
            canvas_ele = document.createElement('canvas')
            canvas_ele.id = html_element_id + '-canvas'
            document.getElementById(html_element_id).appendChild(canvas_ele)
            draw_bar_chart(html_element_id + '-canvas', chart_data)
        }

        function draw_line_chart(element_id, chart_data) {
            var ctx = document.getElementById(element_id).getContext('2d')
            var bar_chart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: chart_data.labels,
                    datasets: [{
                        label: chart_data.datasets[0].label,
                        //barPercentage: 1.0,
                        categoryPercentage: 1.0,
                        backgroundColor: chart_data.datasets[0].strokeColor,
                        borderColor: chart_data.datasets[0].highlightStroke,
                        data: chart_data.datasets[0].data
                    }]
                },
                options: {
                    //barValueSpacing: 50,
                    responsive: true,
                    maintainAspectRatio: false,
                    legend: {
                        position: 'right'
                    }
                }
            })
        }

        function draw_bar_chart(element_id, chart_data) {
            var ctx = document.getElementById(element_id).getContext('2d')
            var bar_chart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: chart_data.labels,
                    datasets: [{
                        label: chart_data.datasets[0].label,
                        barPercentage: 1.0,
                        categoryPercentage: 1.0,
                        backgroundColor: chart_data.datasets[0].strokeColor,
                        borderColor: chart_data.datasets[0].highlightStroke,
                        data: chart_data.datasets[0].data
                    }, {
                        //barPercentage: 1.0,
                        //categoryPercentage: 1.0,
                        label: chart_data.datasets[1].label,
                        backgroundColor: chart_data.datasets[1].strokeColor,
                        borderColor: chart_data.datasets[1].highlightStroke,
                        data: chart_data.datasets[1].data
                    }]
                },
                options: {
                    barValueSpacing: 50,
                    responsive: true,
                    maintainAspectRatio: false,
                    legend: {
                        position: 'right'
                    }
                }
            })

        }
    </script>
</body>

</html>